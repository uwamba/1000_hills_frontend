(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6569],{4352:(e,t,r)=>{Promise.resolve().then(r.bind(r,9386)),Promise.resolve().then(r.bind(r,6821)),Promise.resolve().then(r.bind(r,4615))},4436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var a=r(2115),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=a.createContext&&a.createContext(l),s=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var a,l,n;a=e,l=t,n=r[t],(l=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(l))in a?Object.defineProperty(a,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[l]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>a.createElement(u,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:l,size:n,title:i}=e,d=function(e,t){if(null==e)return{};var r,a,l=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,s),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==n?a.createElement(n.Consumer,null,e=>t(e)):t(l)}},4615:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var a=r(5155),l=r(6874),n=r.n(l);function s(){return(0,a.jsx)("header",{className:"bg-blue-800 text-white shadow-md sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Liva Trip"}),(0,a.jsxs)("nav",{className:"space-x-6",children:[(0,a.jsx)(n(),{href:"/",className:"hover:underline",children:"Home"}),(0,a.jsx)(n(),{href:"/roomList",className:"hover:underline",children:"Hotels Rooms"}),(0,a.jsx)(n(),{href:"/busListing",className:"hover:underline",children:"Bus Tickets"}),(0,a.jsx)(n(),{href:"/apartmentsListing",className:"hover:underline",children:"Apartment"}),(0,a.jsx)(n(),{href:"/",className:"hover:underline",children:"Event & Meeting"}),(0,a.jsx)(n(),{href:"/contact",className:"hover:underline",children:"Contact Us"}),(0,a.jsx)(n(),{href:"/signin",className:"hover:underline",children:"Sign in"})]})]})})}},6821:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(5155),l=r(2115);function n(){let[e,t]=(0,l.useState)(!1);return(0,a.jsxs)("footer",{className:"bg-blue-800 text-white py-6 mt-10 relative z-10",children:[(0,a.jsxs)("div",{className:"container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm sm:text-base mb-2 sm:mb-0",children:"\xa9 2025 Visit Liva Trip. All rights reserved."}),(0,a.jsx)("button",{onClick:()=>t(!e),className:"bg-white text-blue-800 px-4 py-2 rounded hover:bg-blue-100 font-semibold transition duration-200",children:"Chat with Us"})]}),e&&(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white w-80 sm:w-96 p-4 rounded-lg shadow-lg border border-gray-300 text-black relative",children:[(0,a.jsx)("button",{onClick:()=>t(!1),className:"absolute top-2 right-2 text-gray-500 hover:text-red-500 text-xl",children:"\xd7"}),(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3 text-blue-800",children:"Live Chat"}),(0,a.jsx)("div",{className:"h-40 overflow-y-auto border border-gray-200 rounded p-2 mb-3 text-sm",children:(0,a.jsx)("p",{className:"text-gray-600 italic",children:"Chat started. How can we help you today?"})}),(0,a.jsx)("input",{type:"text",placeholder:"Type your message...",className:"w-full p-2 border border-gray-300 rounded mb-2"}),(0,a.jsx)("button",{className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition",children:"Send"})]})})]})}},9386:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(5155),l=r(2115),n=r(9911);let s="https://staging.livatrip.com/api",o=e=>{let{propertyId:t,price:r,object_type:o,seatLayout:i}=e,[c,d]=(0,l.useState)({email:"",names:"",country:"",phone:"",object_type:o,object_id:t,amount_to_pay:r.toString(),seat:"",status:"",payment_method:"",extra_note:"",momo_number:""}),[u,m]=(0,l.useState)(""),[h,x]=(0,l.useState)("select-seat"),[b,p]=(0,l.useState)(!1),[g,f]=(0,l.useState)(!1),[y,j]=(0,l.useState)(!1),v=()=>{j(!1),d({email:"",names:"",country:"",phone:"",object_type:o,object_id:t,amount_to_pay:r.toString(),seat:"",status:"",payment_method:"",extra_note:"",momo_number:""}),m(""),x("select-seat")},N=e=>{d(t=>({...t,seat:e.toString()})),x("form")},w=async()=>{p(!0);try{if(!(await fetch("".concat(s,"/send-otp"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:c.email})})).ok)throw Error("Failed to send OTP");x("otp")}catch(e){alert("Error sending OTP"),console.error(e)}finally{p(!1)}},k=async()=>{f(!0);try{if(!(await fetch("".concat(s,"/verify-otp"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:c.email,otp:u})})).ok)throw Error("Invalid OTP");if(!(await fetch("".concat(s,"/booking/ticket"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)})).ok)throw Error("Booking failed");x("success")}catch(e){alert("Verification or booking failed"),console.error(e)}finally{f(!1)}},O=e=>{let{name:t,value:r}="target"in e?e.target:e;d(e=>({...e,[t]:r}))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded",onClick:()=>{j(!0),x("select-seat")},children:"Book Now"}),y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-50 flex justify-center items-center",onClick:e=>{e.target.classList.contains("bg-black")&&v()},children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 relative",children:[(0,a.jsx)("button",{onClick:v,className:"absolute top-3 right-3 text-black-600 hover:text-black",children:(0,a.jsx)(n.QCr,{size:18})}),"select-seat"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Select Your Seat"}),(()=>{let{row:e,seats_per_row:t,exclude:r}=i,l=[],s=1;for(let o=0;o<e;o++){let e=[];for(let l=0;l<t;l++){let t=r.includes(s),l=c.seat===s.toString();e.push((0,a.jsxs)("button",{disabled:t,onClick:()=>N(s),className:"m-1 p-2 rounded ".concat(t?"bg-gray-300 cursor-not-allowed":l?"bg-green-500 text-white":"bg-blue-500 text-white"),children:[(0,a.jsx)(n.n75,{}),(0,a.jsx)("span",{className:"block text-xs",children:s})]},s)),s++}l.push((0,a.jsx)("div",{className:"flex justify-center mb-2",children:e},"row-".concat(o)))}return l})()]}),"form"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-4 text-black-600",children:"Enter Booking Details"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{name:"names",placeholder:"Full Names",value:c.names,onChange:O,className:"w-full p-2 border rounded"}),(0,a.jsx)("input",{name:"email",type:"email",placeholder:"Email",value:c.email,onChange:O,className:"w-full p-2 border rounded"}),(0,a.jsx)("input",{name:"country",placeholder:"Country",value:c.country,onChange:O,className:"w-full p-2 border rounded"}),(0,a.jsx)("input",{name:"phone",placeholder:"Phone",value:c.phone,onChange:O,className:"w-full p-2 border rounded"}),(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsx)("button",{type:"button",onClick:()=>{if(!c.email||!c.names||!c.phone||!c.country)return alert("Please complete all personal details.");x("payment")},disabled:b,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:b?"Sending OTP...":"Continue"})})]})]}),"payment"===h&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-black",children:"Choose Payment Method"}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"text-black",children:"Payment Method"}),(0,a.jsxs)("select",{name:"payment_method",value:c.payment_method,onChange:O,className:"w-full p-2 border rounded mt-1 text-black",children:[(0,a.jsx)("option",{value:"",children:"-- Select Payment Method --"}),(0,a.jsx)("option",{value:"momo_rwanda",children:"MOMO (MTN Rwanda)"}),(0,a.jsx)("option",{value:"flutterwave",children:"Flutterwave (MOMO, Airtel, Card, Bank Transfer)"})]})]}),"momo_rwanda"===c.payment_method&&(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"text-black",children:"MoMo Phone Number"}),(0,a.jsx)("input",{type:"number",name:"momo_number",placeholder:"momo_number (e.g., 2507XXXXXXXX)",value:c.momo_number,onChange:e=>O({name:"momo_number",value:e.target.value}),className:"w-full p-2 border rounded text-black"}),(0,a.jsx)("textarea",{name:"extra_note",placeholder:"Additional Notes (optional)",value:c.extra_note,onChange:e=>O({name:"extra_note",value:e.target.value}),className:"w-full p-2 border rounded text-black"})]})}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>x("form"),className:"px-4 py-2 bg-gray-300 text-black rounded",children:"Back"}),(0,a.jsx)("button",{type:"button",onClick:w,disabled:b,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:b?"Sending OTP...":"Continue"})]})]}),"otp"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-4 text-black-600",children:"Enter OTP"}),(0,a.jsx)("input",{type:"text",placeholder:"Enter OTP",value:u,onChange:e=>m(e.target.value),className:"w-full p-2 border rounded mb-3"}),(0,a.jsx)("button",{onClick:k,disabled:g,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded",children:g?"Verifying...":"Verify and Book"})]}),"success"===h&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-green-600 mb-4",children:"Booking Successful!"}),(0,a.jsx)("p",{children:"Check your email for confirmation."}),(0,a.jsx)("button",{onClick:v,className:"mt-4 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded",children:"Done"})]})]})})]})};function i(){let[e,t]=(0,l.useState)([]),[r,n]=(0,l.useState)([]),[s,i]=(0,l.useState)([]),[c,d]=(0,l.useState)(""),[u,m]=(0,l.useState)(""),[h,x]=(0,l.useState)(!0),b=async e=>{try{x(!0);let e=new URLSearchParams;c&&e.append("agency",c),u&&e.append("departure_date",u);let r=await fetch("".concat("https://staging.livatrip.com/api","/client/journeys?").concat(e.toString()));if(!r.ok)throw Error("Failed to fetch journeys");let a=(await r.json()).data.map(e=>({...e})),l=Array.from(new Set(a.map(e=>{var t;return null==(t=e.bus)?void 0:t.agency.name}).filter(Boolean)));t(a),n(a),i(l)}catch(e){console.error("Error fetching journeys:",e)}finally{x(!1)}};return(0,l.useEffect)(()=>{b(1)},[c,u]),(0,a.jsxs)("div",{className:"p-6 bg-gray-100 min-h-screen",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-indigo-800",children:"Available Journeys"}),(0,a.jsx)("div",{className:"bg-blue-700 rounded-lg p-6 mb-8 shadow-sm",children:(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col w-full md:w-1/4",children:[(0,a.jsx)("label",{htmlFor:"agency",className:"text-sm font-semibold text-gray-700 mb-1",children:"Agency"}),(0,a.jsxs)("select",{id:"agency",value:c,onChange:e=>d(e.target.value),className:"p-2 border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800",children:[(0,a.jsx)("option",{value:"",children:"All Agencies"}),s.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"flex flex-col w-full md:w-1/4",children:[(0,a.jsx)("label",{htmlFor:"departure",className:"text-sm font-semibold text-gray-700 mb-1",children:"Departure Date"}),(0,a.jsx)("input",{id:"departure",type:"date",value:u,onChange:e=>m(e.target.value),className:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"})]}),(0,a.jsx)("div",{className:"flex items-end w-full md:w-auto",children:(0,a.jsx)("button",{onClick:()=>{d(""),m("")},className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition w-full md:w-auto",children:"Clear Filters"})})]})})}),h?(0,a.jsx)("div",{className:"text-center text-lg text-gray-600",children:"Loading..."}):0===r.length?(0,a.jsx)("div",{className:"text-center text-lg text-gray-500",children:"No journeys match your criteria."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>{var t,r,l,n,s;let i=null==(t=e.bus)?void 0:t.layout;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow p-5 hover:shadow-md transition-all",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,a.jsxs)("h2",{className:"text-xl font-semibold text-indigo-700",children:[e.from," ➡️ ",e.to]})}),(0,a.jsxs)("div",{className:"text-gray-600 text-sm mb-2",children:[(0,a.jsx)("strong",{className:"text-gray-800",children:"Agency:"})," ",(null==(r=e.bus)?void 0:r.agency.name)||"—"]}),(0,a.jsxs)("div",{className:"text-gray-600 text-sm mb-2",children:[(0,a.jsx)("strong",{className:"text-gray-800",children:"Bus:"})," ",(null==(l=e.bus)?void 0:l.name)||"—"," |"," ",(0,a.jsx)("span",{className:"text-gray-500 text-xs",children:null==i?void 0:i.name})]}),(0,a.jsxs)("div",{className:"text-gray-600 text-sm mb-2",children:[(0,a.jsx)("strong",{className:"text-gray-800",children:"Departure:"})," ",new Date(e.departure).toLocaleString()]}),(0,a.jsxs)("div",{className:"text-gray-700 text-lg mt-4 font-bold",children:[null==(n=e.price)?void 0:n.toLocaleString()," RWF"]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o,{propertyId:e.id.toString(),price:null!=(s=e.price)?s:0,object_type:"ticket",seatLayout:{row:(null==i?void 0:i.seat_row)||5,seats_per_row:(null==i?void 0:i.seat_column)||4,exclude:(null==i?void 0:i.exclude)||[]}})})]},e.id)})}),(0,a.jsx)("div",{className:"mt-10 flex justify-center items-center space-x-4"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6711,6874,8441,1684,7358],()=>t(4352)),_N_E=e.O()}]);