(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4217],{1793:(e,t,a)=>{Promise.resolve().then(a.bind(a,3807))},3807:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(5155),r=a(2115),l=a(5695),o=a(6874),n=a.n(o);function c(){let[e,t]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[c,i]=(0,r.useState)("admin"),[d,u]=(0,r.useState)(""),m=(0,l.useRouter)(),g=async t=>{t.preventDefault(),u("");let s="admin"===c?"/login":"/admin/login";try{let t=await fetch("".concat("https://backtest.livatrip.com/api").concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})}),r=await t.json();if(console.log("Login Response:",r),!t.ok)throw Error(r.error||"Login failed");localStorage.setItem("authToken",r.token),localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("userType",c),"manager"===c?(localStorage.setItem("objectManagementType",JSON.stringify(r.managed_objects)),localStorage.setItem("objectManagementId",r.managed_objects.id||"")):(localStorage.setItem("objectManagementType",""),localStorage.setItem("objectManagementId","")),m.push("/dashboard")}catch(e){u(e.message)}};return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-50",children:(0,s.jsxs)("form",{onSubmit:g,className:"w-96 p-6 shadow-md rounded bg-white text-black",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Sign In"}),d&&(0,s.jsx)("p",{className:"text-red-500 text-sm mb-3",children:d}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1 text-black",children:"Login as:"}),(0,s.jsxs)("select",{className:"w-full p-2 border rounded text-black",value:c,onChange:e=>i(e.target.value),children:[(0,s.jsx)("option",{value:"admin",children:"Admin"}),(0,s.jsx)("option",{value:"manager",children:"Manager"})]})]}),(0,s.jsx)("input",{type:"email",placeholder:"Email",className:"w-full p-2 border rounded mb-3 text-black placeholder-gray-500",value:e,onChange:e=>t(e.target.value),required:!0}),(0,s.jsx)("input",{type:"password",placeholder:"Password",className:"w-full p-2 border rounded mb-3 text-black placeholder-gray-500",value:a,onChange:e=>o(e.target.value),required:!0}),(0,s.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600",children:"Login"}),(0,s.jsx)("div",{className:"mt-3 text-center",children:(0,s.jsx)(n(),{href:"/forgot-password",className:"text-blue-500 hover:underline text-sm",children:"Forgot password?"})})]})})}},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},e=>{e.O(0,[6874,8441,5964,7358],()=>e(e.s=1793)),_N_E=e.O()}]);