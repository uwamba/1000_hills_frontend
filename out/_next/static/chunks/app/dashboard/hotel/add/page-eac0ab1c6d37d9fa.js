(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{2155:(e,t,a)=>{Promise.resolve().then(a.bind(a,8006))},8006:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(5155),l=a(2115),s=a(2200),n=a(9509);function o(){let[e,t]=(0,l.useState)({name:"",address:"",coordinate:{lat:"",lng:""},description:"",stars:1,working_time:"",status:""}),[a,o]=(0,l.useState)([]),[d,i]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=localStorage.getItem("authToken");e&&i(e)},[]);let{isLoaded:c}=(0,s.KD)({googleMapsApiKey:n.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}),u={lat:parseFloat(e.coordinate.lat)||-1.9441,lng:parseFloat(e.coordinate.lng)||30.0619},m=e=>{let{name:a,value:r,type:l}=e.target;"lat"===a||"lng"===a?t(e=>({...e,coordinate:{...e.coordinate,[a]:r}})):"number"===l?t(e=>({...e,[a]:parseInt(r)||1})):t(e=>({...e,[a]:r}))},x=(e,t)=>{if(t.target.files&&t.target.files[0]){let r=[...a];r[e]=t.target.files[0],o(r)}},p=async r=>{r.preventDefault();let l=new FormData;l.append("name",e.name),l.append("address",e.address),l.append("description",e.description),l.append("stars",e.stars.toString()),l.append("working_time",e.working_time),l.append("status",e.status),l.append("coordinate","".concat(e.coordinate.lat,",").concat(e.coordinate.lng)),a.forEach(e=>{e instanceof File&&e.size>0&&l.append("photos[]",e)});try{let e=await fetch("".concat("https://staging.livatrip.com/api","/hotels"),{method:"POST",headers:{Authorization:"Bearer ".concat(d)},body:l});if(e.ok)alert("Hotel successfully added!"),t({name:"",address:"",coordinate:{lat:"",lng:""},description:"",stars:1,working_time:"",status:""}),o([]);else{let t=await e.text();console.error("Server error:",t),alert("Failed to add hotel.")}}catch(e){console.error("Error:",e),alert("There was an error adding the hotel.")}};return(0,r.jsxs)("form",{onSubmit:p,className:"max-w-3xl mx-auto p-6 bg-white shadow-md rounded space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Hotel"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Hotel Name"}),(0,r.jsx)("input",{type:"text",name:"name",value:e.name,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Address"}),(0,r.jsx)("input",{type:"text",name:"address",value:e.address,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Latitude"}),(0,r.jsx)("input",{type:"text",name:"lat",value:e.coordinate.lat,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Longitude"}),(0,r.jsx)("input",{type:"text",name:"lng",value:e.coordinate.lng,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Description"}),(0,r.jsx)("textarea",{name:"description",value:e.description,onChange:m,rows:3,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Stars"}),(0,r.jsx)("input",{type:"number",name:"stars",value:e.stars,onChange:m,min:1,max:5,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Working Time"}),(0,r.jsx)("input",{type:"text",name:"working_time",value:e.working_time,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Status"}),(0,r.jsxs)("select",{name:"status",value:e.status,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded",children:[(0,r.jsx)("option",{value:"",children:"Select Status"}),(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),c&&(0,r.jsx)("div",{className:"h-64 mt-4",children:(0,r.jsx)(s.u6,{center:u,zoom:15,mapContainerClassName:"w-full h-full rounded",onClick:e=>{var a,r,l,s;let n=null!=(l=null==(a=e.latLng)?void 0:a.lat().toString())?l:"",o=null!=(s=null==(r=e.latLng)?void 0:r.lng().toString())?s:"";n&&o&&t(e=>({...e,coordinate:{lat:n,lng:o}}))},children:(0,r.jsx)(s.pH,{position:u})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Photos"}),(0,r.jsx)("div",{className:"space-y-2",children:a.map((e,t)=>(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>x(t,e),className:"block w-full text-sm border border-gray-300 rounded file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},t))}),(0,r.jsx)("button",{type:"button",onClick:()=>{o([...a,new File([],"")])},className:"mt-3 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700",children:"+ Add Another Photo"})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",className:"w-full py-3 text-white bg-blue-700 rounded hover:bg-blue-800",children:"Submit Hotel"})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[84,441,684,358],()=>t(2155)),_N_E=e.O()}]);