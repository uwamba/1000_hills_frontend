(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[889],{1904:(t,e,a)=>{Promise.resolve().then(a.bind(a,8023))},8023:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>l});var s=a(5155),r=a(2115);let l=()=>{let[t,e]=(0,r.useState)([]),[a,l]=(0,r.useState)(!1),c=async()=>{try{l(!0);let t=localStorage.getItem("authToken"),a=await fetch("".concat("https://staging.livatrip.com/api","/payments"),{headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok)throw Error("Failed to fetch payments");let s=await a.json();Array.isArray(s)?e(s):s&&Array.isArray(s.data)?e(s.data):e([])}catch(t){console.error("Error fetching payments:",t)}finally{l(!1)}},n=async t=>{try{let e=localStorage.getItem("authToken");if(!e)return void alert("Not authenticated");let a=await fetch("".concat("https://staging.livatrip.com/api","/payments/").concat(t,"/status"),{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok){console.error("Failed to check status"),alert("Failed to check status");return}let s=await a.json();console.log("Payment status response:",s),s.success&&s.data?alert("Status: ".concat(s.data.status,"\nAmount: ").concat(s.data.amount)):alert("Status check failed: ".concat(s.message))}catch(t){console.error("Error checking status:",t),alert("An error occurred while checking status.")}};return(0,r.useEffect)(()=>{c()},[]),(0,s.jsxs)("div",{className:"p-6 bg-white min-h-screen",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Payments"}),a?(0,s.jsx)("p",{className:"text-gray-500",children:"Loading..."}):0===t.length?(0,s.jsx)("p",{className:"text-gray-500",children:"No payments found."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full table-auto border border-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-700",children:"Transaction"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-700",children:"Amount"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-700",children:"Account"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-700",children:"Type"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-700",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-700",children:"Client"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:t.map(t=>{var e,a;return(0,s.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:t.transaction_id}),(0,s.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-700",children:["$",t.amount_paid]}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:t.account}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:t.type}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,s.jsx)("span",{className:"inline-block px-2 py-0.5 rounded text-xs font-semibold ".concat("success"===t.status?"bg-green-100 text-green-700":"pending"===t.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:t.status})}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700",children:null!=(a=null==(e=t.client)?void 0:e.name)?a:"-"}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,s.jsx)("button",{onClick:()=>n(t.id),className:"bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded",children:"Check Status"})})]},t.id)})})]})})]})}}},t=>{t.O(0,[8441,5964,7358],()=>t(t.s=1904)),_N_E=t.O()}]);