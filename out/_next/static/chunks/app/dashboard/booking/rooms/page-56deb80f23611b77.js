(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8590],{3416:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(5155),a=r(2115);let o=()=>{let[e,t]=(0,a.useState)([]),[r,o]=(0,a.useState)(!0),[l,n]=(0,a.useState)(""),[c,i]=(0,a.useState)("desc"),d=async()=>{try{let e=localStorage.getItem("authToken"),r=await fetch("".concat("https://staging.livatrip.com/api","/room-bookings"),{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}}),s=await r.json();Array.isArray(s)?t(s):s&&Array.isArray(s.data)?t(s.data):(console.error("Unexpected response format:",s),t([]))}catch(e){console.error("Error fetching room bookings:",e),t([])}finally{o(!1)}};(0,a.useEffect)(()=>{d()},[]);let x=async e=>{console.log("Approving booking",e)},p=async e=>{console.log("Canceling booking",e)},m=e.filter(e=>{var t,r;return null==(r=e.room)||null==(t=r.name)?void 0:t.toLowerCase().includes(l.toLowerCase())}).sort((e,t)=>{let r=new Date(e.from_date_time).getTime(),s=new Date(t.from_date_time).getTime();return"asc"===c?r-s:s-r}),h=()=>{i(e=>"asc"===e?"desc":"asc")};return r?(0,s.jsx)("div",{className:"p-4 text-black",children:"Loading..."}):(0,s.jsxs)("div",{className:"p-6 bg-white min-h-screen text-black",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold mb-6",children:"Room Bookings"}),(0,s.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search by room name...",className:"border border-gray-300 rounded px-4 py-2 w-full max-w-sm",value:l,onChange:e=>n(e.target.value)}),(0,s.jsxs)("button",{onClick:h,className:"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded",title:"Toggle Sort by From Date",children:["Sort by From Date: ","asc"===c?"Ascending ↑":"Descending ↓"]})]}),0===m.length?(0,s.jsx)("p",{children:"No bookings found."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-[900px] w-full border border-gray-300 divide-y divide-gray-200 text-sm text-black",children:[(0,s.jsx)("thead",{className:"bg-gray-100 text-black",children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("th",{className:"border px-4 py-2 text-left cursor-pointer",onClick:h,children:["From ","asc"===c?"↑":"↓"]}),(0,s.jsx)("th",{className:"border px-4 py-2 text-left",children:"To"}),(0,s.jsx)("th",{className:"border px-4 py-2 text-left",children:"Amount"}),(0,s.jsx)("th",{className:"border px-4 py-2 text-left",children:"Status"}),(0,s.jsx)("th",{className:"border px-4 py-2 text-left",children:"Room"}),(0,s.jsx)("th",{className:"border px-4 py-2 text-left",children:"Location"}),(0,s.jsx)("th",{className:"border px-4 py-2 text-left",children:"Client"}),(0,s.jsx)("th",{className:"border px-4 py-2 text-left min-w-[180px]",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:m.map(e=>{var t,r,a;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50 text-black",children:[(0,s.jsx)("td",{className:"border px-4 py-2",children:e.from_date_time}),(0,s.jsx)("td",{className:"border px-4 py-2",children:e.to_date_time}),(0,s.jsxs)("td",{className:"border px-4 py-2",children:["$",e.amount_to_pay]}),(0,s.jsx)("td",{className:"border px-4 py-2",children:e.status}),(0,s.jsx)("td",{className:"border px-4 py-2",children:null==(t=e.room)?void 0:t.name}),(0,s.jsx)("td",{className:"border px-4 py-2",children:null==(r=e.room)?void 0:r.location}),(0,s.jsx)("td",{className:"border px-4 py-2",children:null==(a=e.client)?void 0:a.names}),(0,s.jsx)("td",{className:"border px-4 py-2",children:(0,s.jsxs)("div",{className:"flex flex-nowrap gap-1",children:[(0,s.jsx)("button",{onClick:()=>{console.log("Check payment for booking",e.id)},className:"bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Check"}),(0,s.jsx)("button",{onClick:()=>x(e.id),className:"bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Approve"}),(0,s.jsx)("button",{onClick:()=>p(e.id),className:"bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Cancel"})]})})]},e.id)})})]})})]})}},7850:(e,t,r)=>{Promise.resolve().then(r.bind(r,3416))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=7850)),_N_E=e.O()}]);