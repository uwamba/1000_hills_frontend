(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8306],{3352:(e,t,s)=>{Promise.resolve().then(s.bind(s,6404))},6404:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(5155),a=s(2115);let l=()=>{let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),c=async()=>{try{let e=localStorage.getItem("authToken"),s=await fetch("".concat("https://backtest.livatrip.com/api","/ticket-bookings"),{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}}),r=await s.json();Array.isArray(r)?t(r):r&&Array.isArray(r.data)?t(r.data):(console.error("Unexpected response format:",r),t([]))}catch(e){console.error("Error fetching ticket bookings:",e),t([])}finally{l(!1)}};(0,a.useEffect)(()=>{c()},[]);let o=async e=>{console.log("Approving booking",e)},n=async e=>{console.log("Canceling booking",e)};return s?(0,r.jsx)("div",{className:"p-4 text-black",children:"Loading..."}):(0,r.jsxs)("div",{className:"p-6 bg-white min-h-screen text-black",children:[(0,r.jsx)("h1",{className:"text-3xl font-semibold mb-6",children:"Ticket Bookings"}),0===e.length?(0,r.jsx)("p",{children:"No bookings found."}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-[900px] w-full border border-gray-300 divide-y divide-gray-200 text-sm text-black",children:[(0,r.jsx)("thead",{className:"bg-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"From"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"To"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Seat"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Amount"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Status"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Ticket"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Location"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Client"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left min-w-[180px]",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>{var t,s,a;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"border px-4 py-2",children:e.from_date_time}),(0,r.jsx)("td",{className:"border px-4 py-2",children:e.to_date_time}),(0,r.jsx)("td",{className:"border px-4 py-2",children:e.seat}),(0,r.jsxs)("td",{className:"border px-4 py-2",children:["$",e.amount_to_pay]}),(0,r.jsx)("td",{className:"border px-4 py-2",children:e.status}),(0,r.jsx)("td",{className:"border px-4 py-2",children:null==(t=e.ticket)?void 0:t.name}),(0,r.jsx)("td",{className:"border px-4 py-2",children:null==(s=e.ticket)?void 0:s.location}),(0,r.jsx)("td",{className:"border px-4 py-2",children:null==(a=e.client)?void 0:a.names}),(0,r.jsx)("td",{className:"border px-4 py-2",children:(0,r.jsxs)("div",{className:"flex flex-nowrap gap-1",children:[(0,r.jsx)("button",{onClick:()=>{console.log("Check payment for booking",e.id)},className:"bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Check"}),(0,r.jsx)("button",{onClick:()=>o(e.id),className:"bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Approve"}),(0,r.jsx)("button",{onClick:()=>n(e.id),className:"bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Cancel"})]})})]},e.id)})})]})})]})}}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=3352)),_N_E=e.O()}]);