(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8325],{4323:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(5155),s=a(2115);let l=()=>{let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!0),[o,n]=(0,s.useState)(""),[c,i]=(0,s.useState)("desc"),d=async()=>{try{let e=localStorage.getItem("authToken"),a=await fetch("".concat("https://staging.livatrip.com/api","/apartment-bookings"),{headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}}),r=await a.json();Array.isArray(r)?t(r):r&&Array.isArray(r.data)?t(r.data):(console.error("Unexpected response format:",r),t([]))}catch(e){console.error("Error fetching apartment bookings:",e),t([])}finally{l(!1)}};(0,s.useEffect)(()=>{d()},[]);let x=async e=>{console.log("Approving booking",e)},p=async e=>{console.log("Canceling booking",e)},m=e.filter(e=>{var t,a;return null==(a=e.apartment)||null==(t=a.name)?void 0:t.toLowerCase().includes(o.toLowerCase())}).sort((e,t)=>{let a=new Date(e.from_date_time).getTime(),r=new Date(t.from_date_time).getTime();return"asc"===c?a-r:r-a}),h=()=>{i(e=>"asc"===e?"desc":"asc")};return a?(0,r.jsx)("div",{className:"p-4 text-black",children:"Loading..."}):(0,r.jsxs)("div",{className:"p-6 bg-white min-h-screen text-black",children:[(0,r.jsx)("h1",{className:"text-3xl font-semibold mb-6",children:"Apartment Bookings"}),(0,r.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by apartment name...",className:"border border-gray-300 rounded px-4 py-2 w-full max-w-sm",value:o,onChange:e=>n(e.target.value)}),(0,r.jsxs)("button",{onClick:h,className:"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded",title:"Toggle Sort by From Date",children:["Sort by From Date: ","asc"===c?"Ascending ↑":"Descending ↓"]})]}),0===m.length?(0,r.jsx)("p",{children:"No bookings found."}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-[900px] w-full border border-gray-300 divide-y divide-gray-200 text-sm text-black",children:[(0,r.jsx)("thead",{className:"bg-gray-100 text-black",children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("th",{className:"border px-4 py-2 text-left cursor-pointer",onClick:h,title:"Click to toggle sort order",children:["From ","asc"===c?"↑":"↓"]}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"To"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Amount"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Status"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Apartment"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Location"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left",children:"Client"}),(0,r.jsx)("th",{className:"border px-4 py-2 text-left min-w-[180px]",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:m.map(e=>{var t,a,s;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 text-black",children:[(0,r.jsx)("td",{className:"border px-4 py-2",children:e.from_date_time}),(0,r.jsx)("td",{className:"border px-4 py-2",children:e.to_date_time}),(0,r.jsxs)("td",{className:"border px-4 py-2",children:["$",e.amount_to_pay]}),(0,r.jsx)("td",{className:"border px-4 py-2",children:e.status}),(0,r.jsx)("td",{className:"border px-4 py-2",children:null==(t=e.apartment)?void 0:t.name}),(0,r.jsx)("td",{className:"border px-4 py-2",children:null==(a=e.apartment)?void 0:a.location}),(0,r.jsx)("td",{className:"border px-4 py-2",children:null==(s=e.client)?void 0:s.names}),(0,r.jsx)("td",{className:"border px-4 py-2",children:(0,r.jsxs)("div",{className:"flex flex-nowrap gap-1",children:[(0,r.jsx)("button",{onClick:()=>{console.log("Check payment for booking",e.id)},className:"bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Check"}),(0,r.jsx)("button",{onClick:()=>x(e.id),className:"bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Approve"}),(0,r.jsx)("button",{onClick:()=>p(e.id),className:"bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Cancel"})]})})]},e.id)})})]})})]})}},5067:(e,t,a)=>{Promise.resolve().then(a.bind(a,4323))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=5067)),_N_E=e.O()}]);