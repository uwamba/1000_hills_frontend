(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{3661:(e,t,a)=>{Promise.resolve().then(a.bind(a,8481))},8481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(5155),s=a(2115);function o(){let[e,t]=(0,s.useState)([]),[a,o]=(0,s.useState)(!0);(0,s.useEffect)(()=>{c()},[]);let c=async()=>{try{o(!0);let e=localStorage.getItem("authToken"),a=await fetch("".concat("https://staging.livatrip.com/api","/admin"),{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)return void console.error("Failed to fetch users");let r=await a.json();console.log("Fetched data:",r),Array.isArray(r)?t(r):r&&Array.isArray(r.data)?t(r.data):(console.error("Unexpected response format:",r),t([]))}catch(e){console.error("Error:",e)}finally{o(!1)}},l=async e=>{if(confirm("Are you sure you want to delete this user?"))try{let t=localStorage.getItem("authToken");(await fetch("".concat("https://staging.livatrip.com/api","/admin/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok?(alert("User deleted successfully!"),c()):alert("Failed to delete user.")}catch(e){console.error("Error deleting user:",e)}},i=async(e,t)=>{try{let a=localStorage.getItem("authToken");(await fetch("".concat("https://staging.livatrip.com/api","/admin/").concat(e,"/status"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({is_active:!t})})).ok?(alert("User ".concat(t?"deactivated":"activated"," successfully!")),c()):alert("Failed to toggle user status.")}catch(e){console.error("Error toggling user status:",e)}},n=async e=>{let t=prompt("Enter new password:");if(t)try{let a=localStorage.getItem("authToken");(await fetch("".concat("https://staging.livatrip.com/api","/admin/").concat(e,"/password"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({password:t})})).ok?alert("Password updated successfully!"):alert("Failed to update password.")}catch(e){console.error("Error updating password:",e)}},d=e=>{alert("Editing user: ".concat(e.names))};return(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-4 bg-white shadow rounded",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"User List"}),a?(0,r.jsx)("p",{children:"Loading users..."}):0===e.length?(0,r.jsx)("p",{children:"No users found."}):(0,r.jsxs)("table",{className:"min-w-full border border-gray-300 text-gray-800",children:[(0,r.jsx)("thead",{className:"bg-gray-100 text-gray-800 font-semibold",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-2 border",children:"Names"}),(0,r.jsx)("th",{className:"p-2 border",children:"Email"}),(0,r.jsx)("th",{className:"p-2 border",children:"Role"}),(0,r.jsx)("th",{className:"p-2 border",children:"Object"}),(0,r.jsx)("th",{className:"p-2 border",children:"Status"}),(0,r.jsx)("th",{className:"p-2 border",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"".concat(e.is_active?"bg-white text-gray-800":"bg-red-100 text-gray-900 font-medium"),children:[(0,r.jsx)("td",{className:"p-2 border",children:e.names}),(0,r.jsx)("td",{className:"p-2 border",children:e.email}),(0,r.jsx)("td",{className:"p-2 border",children:e.role}),(0,r.jsxs)("td",{className:"p-2 border",children:[e.object," (ID: ",e.object_id,")"]}),(0,r.jsx)("td",{className:"p-2 border",children:e.is_active?"Active":"Inactive"}),(0,r.jsxs)("td",{className:"p-2 border space-x-1 flex flex-wrap",children:[(0,r.jsx)("button",{onClick:()=>d(e),className:"bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>l(e.id),className:"bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded",children:"Delete"}),(0,r.jsx)("button",{onClick:()=>i(e.id,e.is_active),className:"".concat(e.is_active?"bg-yellow-500 hover:bg-yellow-600":"bg-green-500 hover:bg-green-600"," text-white px-2 py-1 rounded"),children:e.is_active?"Deactivate":"Activate"}),(0,r.jsx)("button",{onClick:()=>n(e.id),className:"bg-purple-500 hover:bg-purple-600 text-white px-2 py-1 rounded",children:"Set Password"})]})]},e.id))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(3661)),_N_E=e.O()}]);