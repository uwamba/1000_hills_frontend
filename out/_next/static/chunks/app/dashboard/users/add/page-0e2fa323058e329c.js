(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3390],{1072:(e,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>t});var a=s(5155),n=s(2115);function t(){let[e,o]=(0,n.useState)({names:"",email:"",address:"",phone:"",password:"",role:"",object_id:"",object:"",is_active:"1"}),[s,t]=(0,n.useState)([]),[r,l]=(0,n.useState)([]),[i,c]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("authToken"),[o,s,a]=await Promise.all([fetch("".concat("https://staging.livatrip.com/api","/hotels/names"),{headers:{Authorization:"Bearer ".concat(e)}}),fetch("".concat("https://staging.livatrip.com/api","/apartment-owners/names"),{headers:{Authorization:"Bearer ".concat(e)}}),fetch("".concat("https://staging.livatrip.com/api","/agencies/names"),{headers:{Authorization:"Bearer ".concat(e)}})]);if(o.ok){let e=await o.json();t(e)}if(s.ok){let e=await s.json();l(e)}if(a.ok){let e=await a.json();c(e)}}catch(e){console.error("Error fetching data:",e)}})()},[]);let d=e=>{let{name:s,value:a}=e.target;o(e=>({...e,[s]:a}))},u=(e,s)=>{o(o=>({...o,object:e,object_id:s}))},m=async s=>{s.preventDefault();try{let s=localStorage.getItem("authToken"),a={...e,is_active:"1"===e.is_active},n=await fetch("".concat("https://staging.livatrip.com/api","/admin"),{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(a)});if(n.ok)alert("Admin successfully registered!"),o({names:"",email:"",address:"",phone:"",password:"",role:"",object_id:"",object:"",is_active:"1"});else{let e=await n.text();throw console.error("Server error:",e),Error("Failed to register admin")}}catch(e){console.error("Error:",e),alert("There was an error registering the admin.")}};return(0,a.jsxs)("form",{onSubmit:m,className:"max-w-3xl mx-auto p-6 bg-white shadow-md rounded-md space-y-6 text-black",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Register New Admin"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Full Names"}),(0,a.jsx)("input",{type:"text",name:"names",value:e.names,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Email"}),(0,a.jsx)("input",{type:"email",name:"email",value:e.email,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Phone"}),(0,a.jsx)("input",{type:"text",name:"phone",value:e.phone,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Role"}),(0,a.jsxs)("select",{name:"role",value:e.role,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Role"}),(0,a.jsx)("option",{value:"Admin",children:"Admin"}),(0,a.jsx)("option",{value:"Manager",children:"Manager"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Object Type"}),(0,a.jsxs)("select",{name:"object",value:e.object,onChange:e=>o(o=>({...o,object:e.target.value,object_id:""})),className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Object Type"}),(0,a.jsx)("option",{value:"hotel",children:"Hotel"}),(0,a.jsx)("option",{value:"agence",children:"Agence"}),(0,a.jsx)("option",{value:"apartment",children:"Apartment"})]})]}),"hotel"===e.object&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Hotel to Manage"}),(0,a.jsxs)("select",{name:"hotel_id",value:e.object_id,onChange:e=>u("hotel",e.target.value),className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Hotel"}),s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),"agence"===e.object&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Agence to Manage"}),(0,a.jsxs)("select",{name:"agence_id",value:e.object_id,onChange:e=>u("agence",e.target.value),className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Agence"}),i.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),"apartment"===e.object&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Apartment to Manage"}),(0,a.jsxs)("select",{name:"apartment_id",value:e.object_id,onChange:e=>u("apartment",e.target.value),className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Apartment"}),r.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Address"}),(0,a.jsx)("textarea",{name:"address",value:e.address,onChange:d,rows:3,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Password"}),(0,a.jsx)("input",{type:"password",name:"password",value:e.password,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:"Active Status"}),(0,a.jsxs)("select",{name:"is_active",value:e.is_active,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"1",children:"Active"}),(0,a.jsx)("option",{value:"0",children:"Inactive"})]})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:"w-full py-3 text-white bg-blue-700 rounded hover:bg-blue-800 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-600",children:"Register Admin"})})]})}},4677:(e,o,s)=>{Promise.resolve().then(s.bind(s,1072))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=4677)),_N_E=e.O()}]);