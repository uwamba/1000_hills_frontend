(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3390],{1072:(e,o,s)=>{"use strict";s.r(o),s.d(o,{default:()=>n});var t=s(5155),a=s(2115);function n(){let[e,o]=(0,a.useState)({names:"",email:"",address:"",phone:"",password:"",role:"",object_id:"",object:"",is_active:"1"}),[s,n]=(0,a.useState)([]),[r,l]=(0,a.useState)([]),[i,c]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("authToken"),[o,s,t]=await Promise.all([fetch("".concat("https://stage-front.livatrip.com","/hotels/names"),{headers:{Authorization:"Bearer ".concat(e)}}),fetch("".concat("https://stage-front.livatrip.com","/apartment-owners/names"),{headers:{Authorization:"Bearer ".concat(e)}}),fetch("".concat("https://stage-front.livatrip.com","/agencies/names"),{headers:{Authorization:"Bearer ".concat(e)}})]);if(o.ok){let e=await o.json();n(e)}if(s.ok){let e=await s.json();l(e)}if(t.ok){let e=await t.json();c(e)}}catch(e){console.error("Error fetching data:",e)}})()},[]);let d=e=>{let{name:s,value:t}=e.target;o(e=>({...e,[s]:t}))},u=(e,s)=>{o(o=>({...o,object:e,object_id:s}))},m=async s=>{s.preventDefault();try{let s=localStorage.getItem("authToken"),t={...e,is_active:"1"===e.is_active},a=await fetch("".concat("https://stage-front.livatrip.com","/admin"),{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(t)});if(a.ok)alert("Admin successfully registered!"),o({names:"",email:"",address:"",phone:"",password:"",role:"",object_id:"",object:"",is_active:"1"});else{let e=await a.text();throw console.error("Server error:",e),Error("Failed to register admin")}}catch(e){console.error("Error:",e),alert("There was an error registering the admin.")}};return(0,t.jsxs)("form",{onSubmit:m,className:"max-w-3xl mx-auto p-6 bg-white shadow-md rounded-md space-y-6 text-black",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Register New Admin"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Full Names"}),(0,t.jsx)("input",{type:"text",name:"names",value:e.names,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Email"}),(0,t.jsx)("input",{type:"email",name:"email",value:e.email,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Phone"}),(0,t.jsx)("input",{type:"text",name:"phone",value:e.phone,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Role"}),(0,t.jsxs)("select",{name:"role",value:e.role,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Role"}),(0,t.jsx)("option",{value:"Admin",children:"Admin"}),(0,t.jsx)("option",{value:"Manager",children:"Manager"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Object Type"}),(0,t.jsxs)("select",{name:"object",value:e.object,onChange:e=>o(o=>({...o,object:e.target.value,object_id:""})),className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Object Type"}),(0,t.jsx)("option",{value:"hotel",children:"Hotel"}),(0,t.jsx)("option",{value:"agence",children:"Agence"}),(0,t.jsx)("option",{value:"apartment",children:"Apartment"})]})]}),"hotel"===e.object&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Hotel to Manage"}),(0,t.jsxs)("select",{name:"hotel_id",value:e.object_id,onChange:e=>u("hotel",e.target.value),className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Hotel"}),s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),"agence"===e.object&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Agence to Manage"}),(0,t.jsxs)("select",{name:"agence_id",value:e.object_id,onChange:e=>u("agence",e.target.value),className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Agence"}),i.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),"apartment"===e.object&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Apartment to Manage"}),(0,t.jsxs)("select",{name:"apartment_id",value:e.object_id,onChange:e=>u("apartment",e.target.value),className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Apartment"}),r.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Address"}),(0,t.jsx)("textarea",{name:"address",value:e.address,onChange:d,rows:3,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Password"}),(0,t.jsx)("input",{type:"password",name:"password",value:e.password,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold",children:"Active Status"}),(0,t.jsxs)("select",{name:"is_active",value:e.is_active,onChange:d,className:"w-full p-2 mt-1 border border-gray-400 rounded focus:ring-2 focus:ring-blue-600 focus:outline-none",required:!0,children:[(0,t.jsx)("option",{value:"1",children:"Active"}),(0,t.jsx)("option",{value:"0",children:"Inactive"})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"w-full py-3 text-white bg-blue-700 rounded hover:bg-blue-800 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-600",children:"Register Admin"})})]})}},5964:(e,o,s)=>{Promise.resolve().then(s.bind(s,1072))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=5964)),_N_E=e.O()}]);