(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4463],{1012:(e,s,t)=>{Promise.resolve().then(t.bind(t,7893))},7893:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(5155),r=t(2115);function n(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[c,l]=(0,r.useState)(1),[o,i]=(0,r.useState)(1),d=()=>localStorage.getItem("authToken"),u=async e=>{try{n(!0);let t=d(),a=await fetch("".concat("https://staging.livatrip.com/api","/journeys?page=").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok)throw Error("Failed to fetch journeys");let r=await a.json();s(r.data),l(r.current_page),i(r.last_page)}catch(e){console.error("Error fetching journeys:",e)}finally{n(!1)}};(0,r.useEffect)(()=>{u(c)},[c]);let m=async(e,s)=>{try{let t=d();if(!(await fetch("".concat("https://staging.livatrip.com/api","/journeys/").concat(e,"/status"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:"approved"===s?"pending":"approved"})})).ok)throw Error("Failed to update status");u(c)}catch(e){console.error("Error updating status:",e)}},x=async e=>{if(confirm("Are you sure you want to delete this journey?"))try{let s=d();if(!(await fetch("".concat("https://staging.livatrip.com/api","/journeys/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}})).ok)throw Error("Failed to delete journey");u(c)}catch(e){console.error("Error deleting journey:",e)}};return(0,a.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,a.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 mb-6",children:"Journey List"}),t?(0,a.jsx)("div",{className:"text-center text-lg text-gray-600",children:"Loading journeys..."}):0===e.length?(0,a.jsx)("div",{className:"text-center text-lg text-gray-500",children:"No journeys found."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{var s;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 border border-gray-300 hover:shadow-2xl transition-transform transform hover:scale-105",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-indigo-600",children:["Journey #",e.id]}),(0,a.jsxs)("p",{className:"text-gray-700 mt-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"From:"})," ",e.from]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("span",{className:"font-medium",children:"To:"})," ",e.to]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("span",{className:"font-medium",children:"Departure:"})," ",new Date(e.departure).toLocaleString()]}),(0,a.jsxs)("p",{className:"text-gray-700",children:[(0,a.jsx)("span",{className:"font-medium",children:"Return:"})," ",new Date(e.return).toLocaleString()]}),e.bus&&(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-700 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Bus:"})," ",e.bus.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Price:"})," ",e.price," ",(null==(s=e.currency)?void 0:s.currency_code)||"USD"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Agency:"})," ",e.bus.agency.name]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 ml-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Address:"})," ",e.bus.agency.address,(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"font-medium",children:"Description:"})," ",e.bus.agency.description]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Layout:"})," ",e.bus.layout.name," ","(",e.bus.layout.row,"x",e.bus.layout.column,")"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 ml-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Seat Rows:"})," ",e.bus.layout.seat_row,","," ",(0,a.jsx)("span",{className:"font-medium",children:"Columns:"})," ",e.bus.layout.seat_column,(0,a.jsx)("br",{}),e.bus.layout.exclude&&(0,a.jsxs)("span",{className:"font-medium text-red-500",children:["Excluded: ",e.bus.layout.exclude]})]})]}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,a.jsx)("span",{className:"approved"===e.status?"text-green-600":"text-yellow-600",children:e.status||"N/A"})]}),e.deleted_on&&(0,a.jsxs)("div",{className:"text-red-500",children:[(0,a.jsx)("span",{className:"font-medium",children:"Deleted On:"})," ",new Date(e.deleted_on).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>m(e.id,e.status),className:"px-3 py-1 text-white rounded ".concat("approved"===e.status?"bg-yellow-500":"bg-green-600"),children:"approved"===e.status?"Mark Pending":"Approve"}),(0,a.jsx)("button",{onClick:()=>x(e.id),className:"px-3 py-1 bg-red-600 text-white rounded",children:"Delete"})]})]},e.id)})}),(0,a.jsxs)("div",{className:"mt-8 flex justify-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>{c>1&&l(c-1)},disabled:1===c,className:"px-4 py-2 bg-indigo-500 text-white rounded disabled:opacity-50",children:"Previous"}),(0,a.jsxs)("span",{className:"px-4 py-2 text-gray-700",children:["Page ",c," of ",o]}),(0,a.jsx)("button",{onClick:()=>{c<o&&l(c+1)},disabled:c===o,className:"px-4 py-2 bg-indigo-500 text-white rounded disabled:opacity-50",children:"Next"})]})]})]})}}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=1012)),_N_E=e.O()}]);