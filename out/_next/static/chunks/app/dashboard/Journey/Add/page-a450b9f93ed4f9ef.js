(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{110:(e,r,a)=>{Promise.resolve().then(a.bind(a,3580))},3580:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>o});var t=a(5155),n=a(2115);function o(){let[e,r]=(0,n.useState)({from:"",to:"",departure:"",return:"",time:"",bus_id:"",price:""}),[a,o]=(0,n.useState)([]),[s,l]=(0,n.useState)([]),[i,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{o(["Kigali","Kampala","Daresalam","Kabare"]),(async()=>{try{let e=await fetch("".concat("https://staging.livatrip.com/api","/buses"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});if(!e.ok)throw Error("Failed to fetch buses");let r=(await e.json()).data||[];l(r)}catch(e){console.error("Error fetching buses:",e)}finally{c(!1)}})()},[]);let d=a=>{r({...e,[a.target.name]:a.target.value})},u=async r=>{r.preventDefault();try{let r=localStorage.getItem("authToken"),a=await fetch("".concat("https://staging.livatrip.com/api","/journeys"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to create journey");let t=await a.json();alert("Journey created successfully!"),console.log(t)}catch(e){console.error("Error creating journey:",e),alert("An error occurred while creating the journey.")}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:(0,t.jsxs)("form",{onSubmit:u,className:"w-full max-w-3xl bg-white p-8 rounded-lg shadow-lg border border-gray-300",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8 text-gray-800 text-center",children:"Add New Journey"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"From"}),(0,t.jsxs)("select",{name:"from",value:e.from,onChange:d,required:!0,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,t.jsx)("option",{value:"",children:"Select departure"}),a.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"To"}),(0,t.jsxs)("select",{name:"to",value:e.to,onChange:d,required:!0,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,t.jsx)("option",{value:"",children:"Select destination"}),a.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Bus"}),(0,t.jsxs)("select",{name:"bus_id",value:e.bus_id,onChange:d,required:!0,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600",disabled:i,children:[(0,t.jsx)("option",{value:"",children:"Select bus"}),s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Time"}),(0,t.jsx)("input",{type:"time",name:"time",value:e.time,onChange:d,required:!0,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600"})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Departure"}),(0,t.jsx)("input",{type:"datetime-local",name:"departure",value:e.departure,onChange:d,required:!0,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600"})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Return (optional)"}),(0,t.jsx)("input",{type:"datetime-local",name:"return",value:e.return,onChange:d,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600"})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Price (RWF)"}),(0,t.jsx)("input",{type:"number",name:"price",value:e.price,onChange:d,required:!0,min:"0",step:"0.01",className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600"})]})]}),(0,t.jsx)("button",{type:"submit",className:"mt-8 w-full bg-green-700 text-white font-bold px-4 py-3 rounded hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Add Journey"})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[441,684,358],()=>r(110)),_N_E=e.O()}]);