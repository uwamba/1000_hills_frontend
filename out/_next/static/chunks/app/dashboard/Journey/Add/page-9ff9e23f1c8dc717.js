(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6922],{3580:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var a=t(5155),n=t(2115);function o(){let[e,r]=(0,n.useState)({from:"",to:"",departure:"",return:"",time:"",bus_id:"",price:"",currency:""}),[t,o]=(0,n.useState)([]),[s,l]=(0,n.useState)([]),[c,i]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{o(["Kigali","Kampala","Daresalam","Kabare"]);let e=async()=>{try{let e=await fetch("".concat("https://backtest.livatrip.com/api","/exchange-rates"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});if(!e.ok)throw Error("Failed to fetch currencies");let r=await e.json();i(r)}catch(e){console.error("Error fetching currencies:",e)}};(async()=>{try{let e=await fetch("".concat("https://backtest.livatrip.com/api","/buses"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});if(!e.ok)throw Error("Failed to fetch buses");let r=await e.json();l(r.data||[])}catch(e){console.error("Error fetching buses:",e)}finally{u(!1)}})(),e()},[]);let g=t=>{r({...e,[t.target.name]:t.target.value})},m=async r=>{r.preventDefault();try{let r=localStorage.getItem("authToken"),t=await fetch("".concat("https://backtest.livatrip.com/api","/journeys"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create journey");let a=await t.json();alert("Journey created successfully!"),console.log(a)}catch(e){console.error("Error creating journey:",e),alert("An error occurred while creating the journey.")}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:(0,a.jsxs)("form",{onSubmit:m,className:"w-full max-w-3xl bg-white p-8 rounded-lg shadow-lg border border-gray-300",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8 text-gray-800 text-center",children:"Add New Journey"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"From"}),(0,a.jsxs)("select",{name:"from",value:e.from,onChange:g,required:!0,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,a.jsx)("option",{value:"",children:"Select departure"}),t.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"To"}),(0,a.jsxs)("select",{name:"to",value:e.to,onChange:g,required:!0,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,a.jsx)("option",{value:"",children:"Select destination"}),t.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Bus"}),(0,a.jsxs)("select",{name:"bus_id",value:e.bus_id,onChange:g,required:!0,disabled:d,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,a.jsx)("option",{value:"",children:"Select bus"}),s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Time"}),(0,a.jsx)("input",{type:"time",name:"time",value:e.time,onChange:g,required:!0,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Departure"}),(0,a.jsx)("input",{type:"date",name:"departure",value:e.departure,onChange:g,required:!0,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Return (optional)"}),(0,a.jsx)("input",{type:"date",name:"return",value:e.return,onChange:g,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Price"}),(0,a.jsx)("input",{type:"number",name:"price",value:e.price,onChange:g,required:!0,min:"0",step:"0.01",className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"mb-1 font-semibold text-gray-900",children:"Currency"}),(0,a.jsxs)("select",{name:"currency",value:e.currency,onChange:g,required:!0,className:"border border-gray-500 rounded px-3 py-2 text-gray-800 bg-white focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,a.jsx)("option",{value:"",children:"Select currency"}),c.map(e=>(0,a.jsxs)("option",{value:e.currency_code,children:[e.currency_code," (",e.rate_to_usd,")"]},e.currency_code))]})]})]}),(0,a.jsx)("button",{type:"submit",className:"mt-8 w-full bg-green-700 text-white font-bold px-4 py-3 rounded hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Add Journey"})]})})}},9552:(e,r,t)=>{Promise.resolve().then(t.bind(t,3580))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=9552)),_N_E=e.O()}]);