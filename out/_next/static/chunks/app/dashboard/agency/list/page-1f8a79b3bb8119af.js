(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8122],{2526:(e,t,a)=>{Promise.resolve().then(a.bind(a,3604))},3604:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(5155),r=a(2115);function n(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[l,d]=(0,r.useState)(null),i=()=>localStorage.getItem("authToken");(0,r.useEffect)(()=>{(async()=>{try{let e=i();if(!e){console.error("No auth token found."),n(!1);return}let a=await fetch("".concat("https://staging.livatrip.com/api","/agencies"),{headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok)throw Error("Failed to fetch agencies");let s=(await a.json()).data||[];t(s)}catch(e){console.error("Error fetching agencies:",e)}finally{n(!1)}})()},[]);let c=async e=>{if(confirm("Are you sure you want to delete this agency?"))try{let a=i();if(!a)return void console.error("No auth token found.");if(!(await fetch("".concat("https://staging.livatrip.com/api","/agencies/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}})).ok)throw Error("Delete failed");t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting agency:",e)}},o=async e=>{e.preventDefault();try{let e=i();if(!e)return void console.error("No auth token found.");let a=await fetch("".concat("https://staging.livatrip.com/api","/agencies/").concat(l.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(l)});if(!a.ok)throw Error("Failed to update agency");let s=await a.json();t(e=>e.map(e=>e.id===s.data.id?s.data:e)),d(null)}catch(e){console.error("Update failed:",e)}};return(0,s.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,s.jsx)("h1",{className:"text-3xl font-extrabold text-gray-900 mb-6",children:"Agency List"}),a?(0,s.jsx)("div",{className:"text-center text-lg text-gray-600",children:"Loading agencies..."}):0===e.length?(0,s.jsx)("div",{className:"text-center text-lg text-gray-500",children:"No agencies found."}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-gray-300 hover:shadow-2xl transition-transform transform hover:scale-105",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-indigo-600",children:e.name}),(0,s.jsx)("p",{className:"text-md text-gray-500",children:e.address}),(0,s.jsx)("p",{className:"text-gray-700 mt-4",children:e.description}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-gray-600 space-y-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,s.jsx)("span",{className:"active"===e.status?"text-green-600":"text-red-600",children:e.status})]}),e.updated_by_user&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Updated By:"})," ",e.updated_by_user.name]}),e.deleted_by_user&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-red-500",children:"Deleted By:"})," ",e.deleted_by_user.name]}),e.deleted_on&&(0,s.jsxs)("div",{className:"text-red-500",children:[(0,s.jsx)("span",{className:"font-medium",children:"Deleted On:"})," ",new Date(e.deleted_on).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsx)("button",{onClick:()=>d(e),className:"px-4 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>c(e.id),className:"px-4 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]},e.id))}),l&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg w-full max-w-md shadow-xl",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Agency"}),(0,s.jsxs)("form",{onSubmit:o,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,s.jsx)("input",{type:"text",value:l.name,onChange:e=>d({...l,name:e.target.value}),className:"w-full border rounded p-2",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,s.jsx)("input",{type:"text",value:l.address,onChange:e=>d({...l,address:e.target.value}),className:"w-full border rounded p-2",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,s.jsx)("textarea",{value:l.description,onChange:e=>d({...l,description:e.target.value}),className:"w-full border rounded p-2",rows:3,required:!0})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>d(null),className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save"})]})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(2526)),_N_E=e.O()}]);