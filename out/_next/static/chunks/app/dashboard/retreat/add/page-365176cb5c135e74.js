(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5449],{1188:(e,a,r)=>{Promise.resolve().then(r.bind(r,1975))},1975:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>s});var t=r(5155),i=r(2115),l=r(5695);function s(){var e,a,r;let[s,n]=(0,i.useState)({title:"",description:"",address:"",capacity:1,status:"",type:"",wifi:!1,projector:!1,theater:!1,flipChart:!1,whiteboard:!1,pricingType:"individual",pricePerPerson:void 0,packagePrice:void 0,packageSize:void 0}),[d,c]=(0,i.useState)([null]),[o,p]=(0,i.useState)(""),u=(0,l.useRouter)(),m=e=>{let{name:a,value:r}=e.target;n(e=>["capacity","pricePerPerson","packagePrice","packageSize"].includes(a)?{...e,[a]:""===r?void 0:Number(r)}:{...e,[a]:r})},h=e=>{let{name:a,checked:r}=e.target;n(e=>({...e,[a]:r}))},g=async e=>{e.preventDefault(),p("");try{let e=new FormData;e.append("title",s.title),e.append("description",s.description),e.append("address",s.address),e.append("capacity",s.capacity.toString()),e.append("status",s.status),e.append("type",s.type),e.append("object_type","retreat"),e.append("wifi",s.wifi?"1":"0"),e.append("projector",s.projector?"1":"0"),e.append("theater",s.theater?"1":"0"),e.append("flip_chart",s.flipChart?"1":"0"),e.append("whiteboard",s.whiteboard?"1":"0"),e.append("pricing_type",s.pricingType),"individual"===s.pricingType&&void 0!==s.pricePerPerson?e.append("price_per_person",s.pricePerPerson.toString()):"package"===s.pricingType&&void 0!==s.packagePrice&&void 0!==s.packageSize&&(e.append("package_price",s.packagePrice.toString()),e.append("package_size",s.packageSize.toString())),d.forEach(a=>{a instanceof File&&e.append("photos[]",a)});let a=localStorage.getItem("authToken"),r=await fetch("".concat("https://staging.livatrip.com/api","/retreats"),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:e});if(!r.ok){let e=await r.text();throw console.error("Server error:",e),Error("Failed to create retreat")}u.push("/dashboard/retreat/add")}catch(e){console.error("Error creating retreat:",e),p("âŒ Failed to create retreat. Please try again.")}};return(0,t.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen text-black",children:[(0,t.jsx)("h1",{className:"text-3xl font-extrabold mb-6 text-center",children:"Add New Retreat"}),o&&(0,t.jsx)("div",{className:"mb-4 p-3 rounded bg-red-100 text-red-700 border border-red-300",children:o}),(0,t.jsxs)("form",{onSubmit:g,encType:"multipart/form-data",className:"bg-white p-6 rounded shadow-md max-w-3xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Event and Meeting Space"}),(0,t.jsx)("input",{name:"title",value:s.title,onChange:m,placeholder:"Title",className:"w-full p-2 mt-1 border border-gray-300 rounded",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,t.jsxs)("select",{name:"type",value:s.type,onChange:m,className:"w-full p-2 mt-1 border border-gray-300 rounded",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Type"}),(0,t.jsx)("option",{value:"Garden",children:"Garden"}),(0,t.jsx)("option",{value:"Wedding Place",children:"Wedding Place"}),(0,t.jsx)("option",{value:"Meeting Room",children:"Meeting Room"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,t.jsx)("input",{name:"address",value:s.address,onChange:m,placeholder:"Address",className:"w-full p-2 mt-1 border border-gray-300 rounded",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Capacity"}),(0,t.jsx)("input",{name:"capacity",type:"number",value:s.capacity,onChange:m,placeholder:"Capacity",min:1,className:"w-full p-2 mt-1 border border-gray-300 rounded",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,t.jsxs)("select",{name:"status",value:s.status,onChange:m,className:"w-full p-2 mt-1 border border-gray-300 rounded",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:[{name:"wifi",label:"WiFi"},{name:"projector",label:"Projector"},{name:"theater",label:"Theater"},{name:"flipChart",label:"Flip chart and markers"},{name:"whiteboard",label:"Whiteboard"}].map(e=>{let{name:a,label:r}=e;return(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",name:a,checked:s[a],onChange:h,className:"form-checkbox"}),(0,t.jsx)("span",{children:r})]},a)})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pricing Type"}),(0,t.jsxs)("select",{name:"pricingType",value:s.pricingType,onChange:m,className:"w-full p-2 mt-1 border border-gray-300 rounded",required:!0,children:[(0,t.jsx)("option",{value:"individual",children:"Individual"}),(0,t.jsx)("option",{value:"package",children:"Package"})]})]}),"individual"===s.pricingType&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Price Per Person"}),(0,t.jsx)("input",{type:"number",name:"pricePerPerson",value:null!=(e=s.pricePerPerson)?e:"",onChange:m,min:0,step:.01,placeholder:"Price per person",className:"w-full p-2 mt-1 border border-gray-300 rounded",required:!0})]}),"package"===s.pricingType&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Package Size"}),(0,t.jsx)("input",{type:"number",name:"packageSize",value:null!=(a=s.packageSize)?a:"",onChange:m,min:1,placeholder:"Package size",className:"w-full p-2 mt-1 border border-gray-300 rounded",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Package Price"}),(0,t.jsx)("input",{type:"number",name:"packagePrice",value:null!=(r=s.packagePrice)?r:"",onChange:m,min:0,step:.01,placeholder:"Package price",className:"w-full p-2 mt-1 border border-gray-300 rounded",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,t.jsx)("textarea",{name:"description",value:s.description,onChange:m,placeholder:"Description",rows:4,className:"w-full p-2 mt-1 border border-gray-300 rounded",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photos"}),d.map((e,a)=>(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>((e,a)=>{if(a.target.files&&a.target.files[0]){let r=[...d];r[e]=a.target.files[0],c(r)}})(a,e),className:"block mb-2"},a)),(0,t.jsx)("button",{type:"button",onClick:()=>{c(e=>[...e,null])},className:"inline-block px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add More Photos"})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-green-600 text-white font-bold py-3 rounded hover:bg-green-700",children:"Create Retreat"})]})]})}},5695:(e,a,r)=>{"use strict";var t=r(8999);r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=1188)),_N_E=e.O()}]);