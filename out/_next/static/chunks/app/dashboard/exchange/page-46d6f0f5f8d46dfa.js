(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9095],{528:(e,t,a)=>{Promise.resolve().then(a.bind(a,1173))},1173:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5155),s=a(2115);function c(){let[e,t]=(0,s.useState)({currency_code:"",rate_to_usd:""}),[a,c]=(0,s.useState)([]),[n,l]=(0,s.useState)(!1),d=localStorage.getItem("authToken"),o="https://staging.livatrip.com/api",i=e=>{let{name:a,value:r}=e.target;t(e=>({...e,[a]:r.toUpperCase()}))},h=async a=>{a.preventDefault();try{if(!(await fetch("".concat(o,"/exchange-rates"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(e)})).ok)throw Error("Failed to save exchange rate");alert("Exchange rate ".concat(n?"updated":"added"," successfully")),t({currency_code:"",rate_to_usd:""}),l(!1),x()}catch(e){console.error("Error saving rate:",e),alert("There was a problem saving the exchange rate.")}},x=async()=>{try{let e=await fetch("".concat(o,"/exchange-rates"),{headers:{Authorization:"Bearer ".concat(d)}}),t=await e.json();c(t)}catch(e){console.error("Error fetching exchange rates:",e)}};return(0,s.useEffect)(()=>{x()},[]),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white shadow-md rounded-md space-y-6 text-black",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:n?"Edit Exchange Rate":"Add Exchange Rate"}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold",children:"Currency Code"}),(0,r.jsx)("input",{type:"text",name:"currency_code",maxLength:3,value:e.currency_code,onChange:i,className:"w-full p-2 border border-gray-400 rounded text-black",placeholder:"e.g. USD, RWF",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold",children:"Rate to USD"}),(0,r.jsx)("input",{type:"number",name:"rate_to_usd",value:e.rate_to_usd,onChange:i,className:"w-full p-2 border border-gray-400 rounded text-black",step:"0.0001",min:"0",required:!0})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",className:"w-full py-3 text-white bg-blue-700 rounded hover:bg-blue-800 transition",children:n?"Update Exchange Rate":"Submit Exchange Rate"})})]}),(0,r.jsx)("hr",{className:"my-6"}),(0,r.jsx)("h3",{className:"text-xl font-bold mb-2",children:"Existing Exchange Rates"}),(0,r.jsxs)("table",{className:"w-full border text-black",children:[(0,r.jsx)("thead",{className:"bg-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-2 border",children:"Currency"}),(0,r.jsx)("th",{className:"p-2 border",children:"Rate to USD"}),(0,r.jsx)("th",{className:"p-2 border",children:"Actions"})]})}),(0,r.jsxs)("tbody",{children:[a.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"p-2 border",children:e.currency_code}),(0,r.jsx)("td",{className:"p-2 border",children:e.rate_to_usd}),(0,r.jsx)("td",{className:"p-2 border",children:(0,r.jsx)("button",{onClick:()=>{t({currency_code:e.currency_code,rate_to_usd:e.rate_to_usd}),l(!0)},className:"px-3 py-1 text-sm text-white bg-yellow-500 rounded hover:bg-yellow-600",children:"Edit"})})]},e.currency_code)),0===a.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"p-4 text-center text-gray-500",children:"No rates found."})})]})]})]})}}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=528)),_N_E=e.O()}]);