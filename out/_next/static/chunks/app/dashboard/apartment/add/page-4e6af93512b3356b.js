(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[512],{3804:(e,a,t)=>{Promise.resolve().then(t.bind(t,5426))},5426:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var n=t(5155),r=t(2115),s=t(2200),l=t(9509);let o={name:"",number_of_bedroom:1,kitchen_inside:!1,kitchen_outside:!1,number_of_floor:1,address:"",coordinate:{lat:"",lng:""},annexes:"",description:"",status:"",swimming_pool:!1,laundry:!1,gym:!1,room_service:!1,sauna_massage:!1,price_per_night:"",monthly_price:""};function i(){let[e,a]=(0,r.useState)(o),[t,i]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),{isLoaded:m}=(0,s.KD)({googleMapsApiKey:l.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}),p={lat:parseFloat(e.coordinate.lat)||-1.9441,lng:parseFloat(e.coordinate.lng)||30.0619},u=e=>{let{name:t,value:n,type:r}=e.target;if("checkbox"===r){let n=e.target;a(e=>({...e,[t]:n.checked}))}else"number_of_bedroom"===t||"number_of_floor"===t?a(e=>({...e,[t]:parseInt(n)||1})):a(e=>({...e,[t]:n}))},x=(e,a)=>{if(a.target.files&&a.target.files[0]){let n=[...t];n[e]=a.target.files[0],i(n)}},h=async n=>{n.preventDefault();let r=new FormData;r.append("name",e.name),r.append("address",e.address),r.append("description",e.description),r.append("number_of_bedroom",e.number_of_bedroom.toString()),r.append("kitchen_inside",e.kitchen_inside?"1":"0"),r.append("kitchen_outside",e.kitchen_outside?"1":"0"),r.append("number_of_floor",e.number_of_floor.toString()),r.append("status",e.status),r.append("coordinate","".concat(e.coordinate.lat,",").concat(e.coordinate.lng)),r.append("annexes",e.annexes),r.append("swimming_pool",e.swimming_pool?"1":"0"),r.append("laundry",e.laundry?"1":"0"),r.append("gym",e.gym?"1":"0"),r.append("room_service",e.room_service?"1":"0"),r.append("sauna_massage",e.sauna_massage?"1":"0"),r.append("price_per_night",e.price_per_night),r.append("monthly_price",e.monthly_price),t.forEach(e=>{e instanceof File&&e.size>0&&r.append("photos[]",e)});try{let e=localStorage.getItem("authToken"),t=await fetch("".concat("https://staging.livatrip.com/api","/apartments"),{method:"POST",headers:{Authorization:"Bearer ".concat(e||"")},body:r});if(t.ok)alert("Apartment successfully added!"),a(o),i([]);else{let e=await t.text();console.error("Server error:",e),alert("Failed to add apartment.")}}catch(e){console.error("Error:",e),alert("There was an error adding the apartment.")}};return(0,n.jsxs)("form",{onSubmit:h,className:"max-w-4xl mx-auto p-6 bg-white shadow-md rounded space-y-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Apartment"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Apartment Name"}),(0,n.jsx)("input",{type:"text",name:"name",value:e.name,onChange:u,required:!0,className:"w-full p-2 border border-gray-300 rounded text-gray-900"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Address"}),(0,n.jsx)("input",{type:"text",name:"address",value:e.address,onChange:u,required:!0,className:"w-full p-2 border border-gray-300 rounded text-gray-900"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Price Per Night"}),(0,n.jsx)("input",{type:"text",name:"price_per_night",value:e.price_per_night,onChange:u,className:"w-full p-2 border border-gray-300 rounded text-gray-900"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Monthly Price"}),(0,n.jsx)("input",{type:"text",name:"monthly_price",value:e.monthly_price,onChange:u,className:"w-full p-2 border border-gray-300 rounded text-gray-900"})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Description"}),(0,n.jsx)("textarea",{name:"description",value:e.description,onChange:u,rows:3,required:!0,className:"w-full p-2 border border-gray-300 rounded text-gray-900"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Number of Bedrooms"}),(0,n.jsx)("input",{type:"number",name:"number_of_bedroom",value:e.number_of_bedroom,onChange:u,min:1,required:!0,className:"w-full p-2 border border-gray-300 rounded text-gray-900"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Number of Floors"}),(0,n.jsx)("input",{type:"number",name:"number_of_floor",value:e.number_of_floor,onChange:u,min:1,required:!0,className:"w-full p-2 border border-gray-300 rounded text-gray-900"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"kitchen_inside",checked:e.kitchen_inside,onChange:u}),(0,n.jsx)("label",{className:"text-gray-900",children:"Kitchen Inside"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",name:"kitchen_outside",checked:e.kitchen_outside,onChange:u}),(0,n.jsx)("label",{className:"text-gray-900",children:"Kitchen Outside"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Annexes"}),(0,n.jsx)("input",{type:"text",name:"annexes",value:e.annexes,onChange:u,className:"w-full p-2 border border-gray-300 rounded text-gray-900"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Status"}),(0,n.jsxs)("select",{name:"status",value:e.status,onChange:u,required:!0,className:"w-full p-2 border border-gray-300 rounded text-gray-900",children:[(0,n.jsx)("option",{value:"",children:"Select Status"}),(0,n.jsx)("option",{value:"active",children:"Active"}),(0,n.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,n.jsx)("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 pt-4",children:[{label:"Swimming Pool",name:"swimming_pool"},{label:"Laundry",name:"laundry"},{label:"Gym",name:"gym"},{label:"Room Service",name:"room_service"},{label:"Sauna Massage",name:"sauna_massage"}].map(a=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",name:a.name,checked:e[a.name],onChange:u}),(0,n.jsx)("label",{className:"text-gray-900",children:a.label})]},a.name))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Photos"}),(0,n.jsx)("div",{className:"space-y-2",children:t.map((e,a)=>(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>x(a,e),className:"block w-full text-sm border border-gray-300 rounded file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 text-gray-900"},a))}),(0,n.jsx)("button",{type:"button",onClick:()=>{i([...t,new File([],"")])},className:"mt-3 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700",children:"+ Add Another Photo"})]}),(0,n.jsx)("div",{className:"md:col-span-2",children:(0,n.jsx)("button",{type:"button",onClick:()=>c(!d),className:"mt-2 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded hover:bg-green-700",children:d?"Close Map":"Set Location on Map"})}),m&&d&&(0,n.jsx)("div",{className:"h-64 mt-4 border rounded overflow-hidden",children:(0,n.jsx)(s.u6,{center:p,zoom:15,mapContainerClassName:"w-full h-full",onClick:e=>{var t,n,r,s;let l=null!=(r=null==(t=e.latLng)?void 0:t.lat().toString())?r:"",o=null!=(s=null==(n=e.latLng)?void 0:n.lng().toString())?s:"";l&&o&&a(e=>({...e,coordinate:{lat:l,lng:o}}))},children:(0,n.jsx)(s.pH,{position:p})})}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"submit",className:"w-full py-3 px-4 text-center font-medium bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Submit Apartment"})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[84,441,684,358],()=>a(3804)),_N_E=e.O()}]);