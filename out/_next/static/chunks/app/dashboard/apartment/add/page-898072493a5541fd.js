(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[512],{3804:(e,a,n)=>{Promise.resolve().then(n.bind(n,5426))},5426:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>i});var t=n(5155),r=n(2115),l=n(2200),s=n(9509);let o={name:"",number_of_bedroom:1,kitchen_inside:!1,kitchen_outside:!1,number_of_floor:1,address:"",coordinate:{lat:"",lng:""},annexes:"",description:"",status:"",swimming_pool:!1,laundry:!1,gym:!1,room_service:!1,sauna_massage:!1,price_per_night:"",monthly_price:""};function i(){let[e,a]=(0,r.useState)(o),[n,i]=(0,r.useState)([]),{isLoaded:d}=(0,l.KD)({googleMapsApiKey:s.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}),c={lat:parseFloat(e.coordinate.lat)||-1.9441,lng:parseFloat(e.coordinate.lng)||30.0619},m=e=>{let{name:n,value:t,type:r}=e.target;if("lat"===n||"lng"===n)a(e=>({...e,coordinate:{...e.coordinate,[n]:t}}));else if("checkbox"===r){let t=e.target;a(e=>({...e,[n]:t.checked}))}else"number_of_bedroom"===n||"number_of_floor"===n?a(e=>({...e,[n]:parseInt(t)||1})):a(e=>({...e,[n]:t}))},u=(e,a)=>{if(a.target.files&&a.target.files[0]){let t=[...n];t[e]=a.target.files[0],i(t)}},p=async t=>{t.preventDefault();let r=new FormData;r.append("name",e.name),r.append("address",e.address),r.append("description",e.description),r.append("number_of_bedroom",e.number_of_bedroom.toString()),r.append("kitchen_inside",e.kitchen_inside?"1":"0"),r.append("kitchen_outside",e.kitchen_outside?"1":"0"),r.append("number_of_floor",e.number_of_floor.toString()),r.append("status",e.status),r.append("coordinate","".concat(e.coordinate.lat,",").concat(e.coordinate.lng)),r.append("annexes",e.annexes),r.append("swimming_pool",e.swimming_pool?"1":"0"),r.append("laundry",e.laundry?"1":"0"),r.append("gym",e.gym?"1":"0"),r.append("room_service",e.room_service?"1":"0"),r.append("sauna_massage",e.sauna_massage?"1":"0"),r.append("price_per_night",e.price_per_night),r.append("monthly_price",e.monthly_price),n.forEach(e=>{e instanceof File&&e.size>0&&r.append("photos[]",e)});try{let e=localStorage.getItem("authToken"),n=await fetch("".concat("https://staging.livatrip.com/api","/apartments"),{method:"POST",headers:{Authorization:"Bearer ".concat(e||"")},body:r});if(n.ok)alert("Apartment successfully added!"),a(o),i([]);else{let e=await n.text();console.error("Server error:",e),alert("Failed to add apartment.")}}catch(e){console.error("Error:",e),alert("There was an error adding the apartment.")}};return(0,t.jsxs)("form",{onSubmit:p,className:"max-w-4xl mx-auto p-6 bg-white shadow-md rounded space-y-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Apartment"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Apartment Name"}),(0,t.jsx)("input",{type:"text",name:"name",value:e.name,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Address"}),(0,t.jsx)("input",{type:"text",name:"address",value:e.address,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Latitude"}),(0,t.jsx)("input",{type:"text",name:"lat",value:e.coordinate.lat,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Longitude"}),(0,t.jsx)("input",{type:"text",name:"lng",value:e.coordinate.lng,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Price Per Night"}),(0,t.jsx)("input",{type:"text",name:"price_per_night",value:e.price_per_night,onChange:m,placeholder:"Enter price per night",className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Monthly Price"}),(0,t.jsx)("input",{type:"text",name:"monthly_price",value:e.monthly_price,onChange:m,placeholder:"Enter monthly price",className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Description"}),(0,t.jsx)("textarea",{name:"description",value:e.description,onChange:m,rows:3,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Number of Bedrooms"}),(0,t.jsx)("input",{type:"number",name:"number_of_bedroom",value:e.number_of_bedroom,onChange:m,min:1,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Number of Floors"}),(0,t.jsx)("input",{type:"number",name:"number_of_floor",value:e.number_of_floor,onChange:m,min:1,required:!0,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",name:"kitchen_inside",checked:e.kitchen_inside,onChange:m}),(0,t.jsx)("label",{className:"text-gray-900",children:"Kitchen Inside"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",name:"kitchen_outside",checked:e.kitchen_outside,onChange:m}),(0,t.jsx)("label",{className:"text-gray-900",children:"Kitchen Outside"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Annexes"}),(0,t.jsx)("input",{type:"text",name:"annexes",value:e.annexes,onChange:m,className:"w-full p-2 border border-gray-300 rounded"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Status"}),(0,t.jsxs)("select",{name:"status",value:e.status,onChange:m,required:!0,className:"w-full p-2 border border-gray-300 rounded",children:[(0,t.jsx)("option",{value:"",children:"Select Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,t.jsx)("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 pt-4",children:[{label:"Swimming Pool",name:"swimming_pool"},{label:"Laundry",name:"laundry"},{label:"Gym",name:"gym"},{label:"Room Service",name:"room_service"},{label:"Sauna Massage",name:"sauna_massage"}].map(a=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",name:a.name,checked:e[a.name],onChange:m}),(0,t.jsx)("label",{className:"text-gray-900",children:a.label})]},a.name))})]}),d&&(0,t.jsx)("div",{className:"h-64 mt-4",children:(0,t.jsx)(l.u6,{center:c,zoom:15,mapContainerClassName:"w-full h-full rounded",onClick:e=>{var n,t,r,l;let s=null!=(r=null==(n=e.latLng)?void 0:n.lat().toString())?r:"",o=null!=(l=null==(t=e.latLng)?void 0:t.lng().toString())?l:"";s&&o&&a(e=>({...e,coordinate:{lat:s,lng:o}}))},children:(0,t.jsx)(l.pH,{position:c})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Photos"}),(0,t.jsx)("div",{className:"space-y-2",children:n.map((e,a)=>(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>u(a,e),className:"block w-full text-sm border border-gray-300 rounded file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},a))}),(0,t.jsx)("button",{type:"button",onClick:()=>{i([...n,new File([],"")])},className:"mt-3 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700",children:"+ Add Another Photo"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"w-full py-3 text-white bg-blue-700 rounded hover:bg-blue-800",children:"Submit Apartment"})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[84,441,684,358],()=>a(3804)),_N_E=e.O()}]);