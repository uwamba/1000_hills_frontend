(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{3919:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});var s=t(5155),l=t(2115);function r(){let[e,a]=(0,l.useState)({name:"",type:"",has_wireless:!1,bed_size:"",has_bathroom:!1,price:0,currency:"",number_of_people:0,has_ac:!1,hotel_id:"",status:"",has_swimming_pool:!1,has_laundry:!1,has_gym:!1,has_room_service:!1,has_sauna_massage:!1,has_kitchen:!1,has_fridge:!1}),[t,r]=(0,l.useState)([]),[n,o]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("https://staging.livatrip.com/api","/hotels/names")),a=await e.json();r(a)}catch(e){console.error("Failed to fetch hotel names",e)}})()},[]);let i=e=>{let t=e.target,{name:s,value:l}=t;t instanceof HTMLInputElement&&"checkbox"===t.type?a(e=>({...e,[s]:t.checked})):a(e=>({...e,[s]:l}))},c=(e,a)=>{if(a.target.files&&a.target.files[0]){let t=[...n];t[e]=a.target.files[0],o(t)}},m=async t=>{t.preventDefault();let s=new FormData;Object.entries(e).forEach(e=>{let[a,t]=e;"boolean"==typeof t?s.append(a,t?"1":"0"):s.append(a,t.toString())}),n.forEach(e=>{e instanceof File&&e.size>0&&s.append("photos[]",e)});try{let e=await fetch("".concat("https://staging.livatrip.com/api","/rooms"),{method:"POST",body:s});if(e.ok)alert("Room successfully added!"),a({name:"",type:"",has_wireless:!1,bed_size:"",has_bathroom:!1,price:0,currency:"",number_of_people:0,has_ac:!1,hotel_id:"",status:"",has_swimming_pool:!1,has_laundry:!1,has_gym:!1,has_room_service:!1,has_sauna_massage:!1,has_kitchen:!1,has_fridge:!1}),o([]);else{let a=await e.text();throw console.error("Server error:",a),Error("Failed to add room")}}catch(e){console.error("Error:",e),alert("There was an error adding the room.")}};return(0,s.jsxs)("form",{onSubmit:m,encType:"multipart/form-data",className:"max-w-4xl mx-auto p-6 bg-white shadow-md rounded-md space-y-6 text-gray-800",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Add New Room"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[[{name:"name",label:"Room Name",type:"text"},{name:"type",label:"Room Type",type:"text"},{name:"bed_size",label:"Bed Size",type:"text"},{name:"price",label:"Price",type:"number"},{name:"currency",label:"Currency",type:"text"},{name:"number_of_people",label:"Number of People",type:"number"}].map(a=>{let{name:t,label:l,type:r}=a;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800",children:l}),(0,s.jsx)("input",{type:r,name:t,value:e[t],onChange:i,className:"w-full p-2 mt-1 border border-gray-400 rounded text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]},t)}),[{name:"has_wireless",label:"Has Wireless"},{name:"has_bathroom",label:"Has Bathroom"},{name:"has_ac",label:"Has AC"}].map(a=>{let{name:t,label:l}=a;return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",name:t,checked:e[t],onChange:i,className:"text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("label",{className:"text-sm font-medium text-gray-800",children:l})]},t)}),[{name:"has_swimming_pool",label:"Swimming Pool"},{name:"has_laundry",label:"Laundry Service"},{name:"has_gym",label:"Gym"},{name:"has_room_service",label:"Room Service"},{name:"has_sauna_massage",label:"Sauna & Massage"},{name:"has_kitchen",label:"Kitchen"},{name:"has_fridge",label:"Fridge"}].map(a=>{let{name:t,label:l}=a;return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",name:t,checked:e[t],onChange:i,className:"text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("label",{className:"text-sm font-medium text-gray-800",children:l})]},t)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800",children:"Hotel"}),(0,s.jsxs)("select",{name:"hotel_id",value:e.hotel_id,onChange:i,className:"w-full p-2 mt-1 border border-gray-400 rounded text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a hotel"}),t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800",children:"Status"}),(0,s.jsxs)("select",{name:"status",value:e.status,onChange:i,className:"w-full p-2 mt-1 border border-gray-400 rounded text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Status"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Photos"}),(0,s.jsx)("div",{className:"space-y-2",children:n.map((e,a)=>(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>c(a,e),className:"block w-full text-sm text-gray-800 file:mr-4 file:py-2 file:px-4 file:border file:rounded file:border-gray-400 file:bg-gray-50 file:text-gray-800"},a))}),(0,s.jsx)("button",{type:"button",onClick:()=>{o([...n,new File([],"")])},className:"mt-2 text-sm text-blue-700 hover:text-blue-900 underline",children:"Add another photo"})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-800",children:"Submit"})})]})}},8559:(e,a,t)=>{Promise.resolve().then(t.bind(t,3919))}},e=>{var a=a=>e(e.s=a);e.O(0,[441,684,358],()=>a(8559)),_N_E=e.O()}]);