(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1457],{3919:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});var o=t(5155),l=t(2115);function r(){let[e,a]=(0,l.useState)({name:"",type:"",has_wireless:!1,bed_size:"",has_bathroom:!1,price:0,currency:"",number_of_people:0,has_ac:!1,hotel_id:"",status:"",has_swimming_pool:!1,has_laundry:!1,has_gym:!1,has_room_service:!1,has_sauna_massage:!1,has_kitchen:!1,has_fridge:!1}),[t,r]=(0,l.useState)([]),[s,n]=(0,l.useState)([]),i=localStorage.getItem("authToken");(0,l.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat("https://staging.livatrip.com/api","/hotels/names"),{headers:{Authorization:"Bearer ".concat(i)}});if(!e.ok)throw Error("Failed to fetch hotel names");let a=await e.json();r(a)}catch(e){console.error("Failed to fetch hotel names:",e)}};i?e():console.warn("No authToken found in localStorage.")},[i]);let c=e=>{let t=e.target,{name:o,value:l}=t;t instanceof HTMLInputElement&&"checkbox"===t.type?a(e=>({...e,[o]:t.checked})):a(e=>({...e,[o]:l}))},u=async t=>{if(t.preventDefault(),!i)return void alert("Authentication token not found. Please log in.");let o=new FormData;Object.entries(e).forEach(e=>{let[a,t]=e;"boolean"==typeof t?o.append(a,t?"1":"0"):o.append(a,t.toString())}),s.forEach(e=>{e instanceof File&&e.size>0&&o.append("photos[]",e)});try{let e=await fetch("".concat("https://staging.livatrip.com/api","/rooms"),{method:"POST",headers:{Authorization:"Bearer ".concat(i)},body:o});if(e.ok)alert("Room successfully added!"),a({name:"",type:"",has_wireless:!1,bed_size:"",has_bathroom:!1,price:0,currency:"",number_of_people:0,has_ac:!1,hotel_id:"",status:"",has_swimming_pool:!1,has_laundry:!1,has_gym:!1,has_room_service:!1,has_sauna_massage:!1,has_kitchen:!1,has_fridge:!1}),n([]);else{let a=await e.text();console.error("Server error:",a),alert("Failed to add room. Server error.")}}catch(e){console.error("Error:",e),alert("There was an error adding the room.")}};return(0,o.jsxs)("form",{onSubmit:u,encType:"multipart/form-data",className:"max-w-4xl mx-auto p-6 bg-white shadow-md rounded-md space-y-6 text-gray-800",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Add New Room"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-800",children:"Room Name"}),(0,o.jsx)("input",{type:"text",name:"name",value:e.name,onChange:c,className:"w-full p-2 mt-1 border border-gray-400 rounded text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-800",children:"Room Type"}),(0,o.jsxs)("select",{name:"type",value:e.type,onChange:c,className:"w-full p-2 mt-1 border border-gray-400 rounded text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select Room Type"}),(0,o.jsx)("option",{value:"Single Room",children:"Single Room"}),(0,o.jsx)("option",{value:"Double",children:"Double"}),(0,o.jsx)("option",{value:"Twin Room",children:"Twin Room"}),(0,o.jsx)("option",{value:"Triple Room",children:"Triple Room"}),(0,o.jsx)("option",{value:"King Room",children:"King Room"}),(0,o.jsx)("option",{value:"Suite",children:"Suite"}),(0,o.jsx)("option",{value:"Executive Room",children:"Executive Room"}),(0,o.jsx)("option",{value:"Presidential Suite",children:"Presidential Suite"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-800",children:"Price"}),(0,o.jsx)("input",{type:"number",name:"price",value:e.price,onChange:c,className:"w-full p-2 mt-1 border border-gray-400 rounded text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-800",children:"Currency"}),(0,o.jsxs)("select",{name:"currency",value:e.currency,onChange:c,className:"w-full p-2 mt-1 border border-gray-400 rounded text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select Currency"}),(0,o.jsx)("option",{value:"FRW",children:"FRW"}),(0,o.jsx)("option",{value:"USD",children:"USD"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-800",children:"Number of People"}),(0,o.jsx)("input",{type:"number",name:"number_of_people",value:e.number_of_people,onChange:c,className:"w-full p-2 mt-1 border border-gray-400 rounded text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-800",children:"Hotel"}),(0,o.jsxs)("select",{name:"hotel_id",value:e.hotel_id,onChange:c,className:"w-full p-2 mt-1 border border-gray-400 rounded text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select a hotel"}),t.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-800",children:"Status"}),(0,o.jsxs)("select",{name:"status",value:e.status,onChange:c,className:"w-full p-2 mt-1 border border-gray-400 rounded text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select Status"}),(0,o.jsx)("option",{value:"active",children:"Active"}),(0,o.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),[{name:"has_wireless",label:"Has Wireless"},{name:"has_bathroom",label:"Has Bathroom"},{name:"has_ac",label:"Has AC"},{name:"has_swimming_pool",label:"Swimming Pool"},{name:"has_laundry",label:"Laundry Service"},{name:"has_gym",label:"Gym"},{name:"has_room_service",label:"Room Service"},{name:"has_sauna_massage",label:"Sauna & Massage"},{name:"has_kitchen",label:"Kitchen"},{name:"has_fridge",label:"Fridge"}].map(a=>{let{name:t,label:l}=a;return(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"checkbox",name:t,checked:e[t],onChange:c,className:"text-blue-600 focus:ring-blue-500"}),(0,o.jsx)("label",{className:"text-sm font-medium text-gray-800",children:l})]},t)})]}),(0,o.jsxs)("div",{className:"mt-4",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Photos"}),(0,o.jsx)("div",{className:"space-y-2",children:s.map((e,a)=>(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:e=>((e,a)=>{if(a.target.files&&a.target.files[0]){let t=[...s];t[e]=a.target.files[0],n(t)}})(a,e),className:"block w-full text-sm text-gray-800 file:mr-4 file:py-2 file:px-4 file:border file:rounded file:border-gray-400 file:bg-gray-50 file:text-gray-800"},a))}),(0,o.jsx)("button",{type:"button",onClick:()=>{n([...s,new File([],"")])},className:"mt-2 text-sm text-blue-700 hover:text-blue-900 underline",children:"Add another photo"})]}),(0,o.jsx)("div",{className:"mt-6",children:(0,o.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-800",children:"Submit"})})]})}},8559:(e,a,t)=>{Promise.resolve().then(t.bind(t,3919))}},e=>{e.O(0,[8441,5964,7358],()=>e(e.s=8559)),_N_E=e.O()}]);